# Step1ne 評分執行指南 — openclaw AI 評分流程

> **本文件供 openclaw 手動執行「今日新增候選人評分」任務**
> 爬蟲 Bot 每日自動匯入候選人，openclaw 的任務是讀取這些候選人、進行 AI 評分、寫回系統。
> 操作者身份格式：`{你的名字}-scoring-bot`，例如 `Jacky-scoring-bot`

---

## ⚠️ 重要觀念：爬蟲候選人的資料特性

爬蟲 Bot 從 LinkedIn/GitHub 搜尋結果匯入的候選人，**只有基本資料**：

| 欄位 | 有無 | 說明 |
|------|------|------|
| `name` | ✅ | 從搜尋結果擷取 |
| `linkedin_url` | ✅ | LinkedIn 個人頁網址 |
| `github_url` | 部分 | GitHub 找到時有 |
| `skills` | ✅ | 職缺關鍵字（不一定完整） |
| `notes` | ✅ | 格式：`Bot 自動匯入 \| 目標職缺：{職位名稱} \| 負責顧問：AIBot-pipeline \| {日期}` |
| `status` | ✅ | 固定為「未開始」 |
| `work_history` | ❌ | 爬蟲未讀頁面，無此資料 |
| `years_experience` | ❌ | 無 |
| `education` | ❌ | 無 |

**這是正常的。** 你的評分任務就是根據現有資料對照職缺的三份畫像，做最佳 AI 判斷。

---

## 執行流程

### 步驟一：取得今日新增候選人

```
GET https://backendstep1ne.zeabur.app/api/candidates?created_today=true
```

篩選條件：`status === "未開始"`（只評尚未處理的）

若今日無新增候選人 → 回報「今日無新增候選人，評分任務結束」，停止執行。

---

### 步驟二：對每位候選人執行 AI 評分

#### 2-1. 取得對應職缺完整資訊

從候選人 `notes` 擷取「目標職缺：{職位名稱}」，呼叫：

```
GET https://backendstep1ne.zeabur.app/api/jobs
```

找到 `position_name` 相符的職缺，**完整讀取以下四份文件**：

| 欄位 | 名稱 | 用途 |
|------|------|------|
| `talent_profile` | **人才畫像** | 理想人選特質、硬性條件（年齡/證件/語言等）|
| `job_description` | **職缺描述（JD）** | 實際工作職責與要求 |
| `company_profile` | **公司畫像** | 公司文化、產業背景、團隊特性 |
| `consultant_notes` | **顧問備註** | 特殊篩選條件（優先閱讀，有硬性門檻）|

若找不到對應職缺 → 僅以「技能廣度」和「可觸達性」評分，評級最高 B，並在結語說明。

---

#### 2-2. 執行 AI 三維評分

**你是 AI，不要只做關鍵字 overlap 計算。** 請閱讀上述四份文件後，用真實判斷給分：

| 維度 | 權重 | 評分說明 |
|------|------|----------|
| **人才畫像符合度** | 40% | 候選人 skills 與 `talent_profile` 描述的理想人才特質吻合程度。硬性條件（年齡、證件、語言）若不符合直接給 0-20 分。 |
| **JD 職責匹配度** | 30% | 候選人技能是否覆蓋 `job_description` 中的核心工作職責。技能越對口、越核心，分數越高。 |
| **公司適配性** | 15% | 根據 `company_profile` 描述的公司文化、產業、規模，判斷此類技能背景的人是否適合這種環境。 |
| **可觸達性** | 10% | `linkedin_url` 存在 = 60 分基礎；`github_url` 也存在 = 100 分。 |
| **活躍信號** | 5% | `github_url` 存在 = 100 分；不存在 = 50 分（無資料不懲罰）。 |

**綜合分數 = 各維度分數 × 權重加總（0–100，取整數）**

**評級對照：**
```
90-100 分 → S   → 狀態：AI推薦
80-89  分 → A+  → 狀態：AI推薦
70-79  分 → A   → 狀態：備選人才
60-69  分 → B   → 狀態：備選人才
< 60   分 → C   → 狀態：備選人才
```

> **💡 評分原則**：同一批候選人的 skills 欄位往往相同（Bot 用職缺關鍵字填入）。
> 真正拉開差距的是：技能與人才畫像的深度吻合、LinkedIn/GitHub 是否存在、
> 以及 consultant_notes 的硬性條件是否符合。請據此拉開分數差距，**不要全部給相近分數**。

---

#### 2-3. 撰寫配對結語（必填，寫入 notes）

配對結語是顧問進行外展前的行動簡報，**必須具體，不能寫模板廢話**：

```
【AI評分 {分數}分 / {評級}】{日期}

📌 配對職位：{position_name}（{client_company}）

✅ 優勢：
- {根據人才畫像，說明候選人哪些技能/特質高度符合}
- {根據JD，說明哪些職責能力有直接對應}
- {根據公司畫像，說明為何適合這個公司環境}
- {可觸達性：LinkedIn / GitHub 存在，方便主動接觸}

⚠️ 待確認：
- {人才畫像中的硬性條件是否符合（年齡、語言、證件等）}
- {JD 中有哪些要求在現有資料中無法確認}
- {目前是否在職、是否 Open to Work}

💡 顧問建議：
{一句話：這人值不值得優先聯繫 + 具體切入點（例如：透過 LinkedIn InMail，主打「{公司某特點}的發展機會」）}

---
```

**範例（Java Developer，Fintech 公司）：**
```
【AI評分 85分 / A+】2026-02-26

📌 配對職位：Java Developer 後端工程師（一通數位有限公司）

✅ 優勢：
- 人才畫像核心要求全覆蓋：Java + Spring Boot + Microservices，與畫像要求高度一致
- JD 職責直接對口：微服務架構開發、Redis 快取、Docker 容器化部署均有技能標記
- 公司為 Fintech 中型團隊，偏重技術深度而非快速迭代，符合後端工程師背景
- LinkedIn 個人頁存在，可直接主動聯繫；GitHub 活躍，顯示近期仍在開發

⚠️ 待確認：
- 年資尚未確認（職缺要求 3 年以上），建議聯繫後確認
- 目前是否在職、是否 Open to Work 尚不明
- 是否有 Fintech / 金融系統開發經驗

💡 顧問建議：
技能與 JD 高度吻合，建議優先透過 LinkedIn InMail 接觸，切入點可提「穩定成長的 Fintech 後端機會，技術棧完全對口」。

---
```

---

### 步驟三：寫回評分結果

對每位候選人呼叫：

```
PATCH https://backendstep1ne.zeabur.app/api/candidates/{id}
Content-Type: application/json

{
  "stability_score": 85,
  "talent_level": "A+",
  "notes": "【AI評分 85分 / A+】...(完整配對結語)",
  "status": "AI推薦",
  "actor": "{你的名字}-scoring-bot"
}
```

> **注意**：`status` 只有 ≥80 分才設為 `AI推薦`，其餘設為 `備選人才`。

---

### 步驟四：回報執行摘要

所有候選人評分完畢後，以以下格式回報：

```
評分完成！今日處理 {N} 位候選人：
- AI推薦（≥80分）：{X} 位
- 備選人才（<80分）：{Y} 位

TOP 3 推薦（依分數排序）：
1. {姓名} — {分數}分 {評級} — {配對職位} — 切入點：{一句話}
2. {姓名} — {分數}分 {評級} — {配對職位} — 切入點：{一句話}
3. {姓名} — {分數}分 {評級} — {配對職位} — 切入點：{一句話}
```

---

## API 端點速查

| 用途 | 端點 |
|------|------|
| 取得今日新增候選人 | `GET /api/candidates?created_today=true` |
| 取得所有職缺 | `GET /api/jobs` |
| 更新候選人評分 | `PATCH /api/candidates/{id}` |
| 寫入系統日誌 | `POST /api/system-log` |

**Base URL**：`https://backendstep1ne.zeabur.app`

---

## 常見問題

**Q: candidates 的 skills 欄位都長一樣怎麼辦？**
A: 正常的。Bot 用職缺關鍵字填入，所以同職缺的候選人 skills 相同。差異要靠 linkedin_url、github_url 是否存在來拉開。請務必根據可觸達性和 consultant_notes 硬性條件拉開分數，**不要全部給相同分數**。

**Q: 找不到對應職缺怎麼辦？**
A: 以「技能廣度」和「可觸達性」為主要評分依據，評級最高給到 B，並在配對結語中說明「職缺資訊未能匹配，建議人工確認目標職位」。

**Q: 我需要訪問候選人的 LinkedIn 頁面嗎？**
A: 不需要。你只使用系統 API 中的現有資料進行評分。讀取 LinkedIn 頁面是 Python 腳本（profile-reader.py）的工作，不是你的任務。

**Q: 系統有 Python 腳本，評分是 Python 做的嗎？**
A: **不是。Python 腳本只負責爬蟲——從 LinkedIn/GitHub 搜尋並匯入候選人資料。評分是你（openclaw）的任務。** 分工如下：
- Python 腳本：搜尋 → 匯入候選人（status=「未開始」）
- 你：讀取「未開始」候選人 → 對照三份畫像 AI 評分 → 寫入配對結語 → PATCH 更新狀態

你評完後，Python 下次爬蟲時會自動跳過非「未開始」的候選人，不會重複處理。

**Q: 每位候選人都要個別 PATCH 嗎？**
A: 是的，每位候選人分開呼叫一次 PATCH。不要等全部評完才一次寫入，評完一個就立刻 PATCH 一個，避免任何意外中斷導致資料遺失。

---

## 完整啟動指令（供顧問複製貼給 openclaw）

```
請先閱讀以下系統文件後立即執行今日評分任務：
1. API 操作指南：https://backendstep1ne.zeabur.app/api/guide
2. 評分執行指南：https://backendstep1ne.zeabur.app/api/scoring-guide

你的身份：{你的名字}-scoring-bot
任務：取得今日新增候選人 → 查詢對應職缺（含人才畫像/JD/公司畫像）→ 每人 AI 評分 → 寫入配對結語 → 更新狀態 → 回報摘要

重要：評完一個人立刻 PATCH 寫入，不要等全部評完才批次寫入。
不需要等待我進一步指示，直接開始執行。
```
